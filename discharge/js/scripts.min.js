document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("pname");e.addEventListener("input",(()=>{const t=e.value.trim(),n=(new Date).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0});document.title=t?`${t} এর ছাড়পত্র - ${n}`:"রোগীর ছাড়পত্র"}))})),$(document).ready((function(){var e,t;function n(e){const t={0:"০",1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯"};return e.replace(/\d/g,(function(e){return t[e]}))}document.getElementById("print").addEventListener("click",(function(){window.print()})),$((function(){$(".list").sortable({placeholder:"ui-state-highlight"}),$(".addnew").click((function(){var e=$(this).data("target"),t=$(e),n=`<li class="ui-state-default"><input type="text" placeholder="নতুন তালিকা ${t.find("li").length+1}"><button class="remove">✖</button></li>`;t.append(n)})),$(document).on("click",".remove",(function(){$(this).parent().remove()}))})),e=new Date,t=String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0"),document.getElementById("current_time").value=t,$.datepicker.regional.bn={closeText:"বন্ধ",prevText:"আগে",nextText:"পরে",currentText:"আজ",monthNames:["জানুয়ারী","ফেব্রুয়ারী","মার্চ","এপ্রিল","মে","জুন","জুলাই","আগস্ট","সেপ্টেম্বর","অক্টোবর","নভেম্বর","ডিসেম্বর"],monthNamesShort:["জানু","ফেব্রু","মার্চ","এপ্রি","মে","জুন","জুল","আগ","সেপ","অক","নভে","ডিসে"],dayNames:["রবিবার","সোমবার","মঙ্গলবার","বুধবার","বৃহস্পতিবার","শুক্রবার","শনিবার"],dayNamesShort:["রবি","সোম","মঙ্গল","বুধ","বৃহ","শুক্র","শনি"],dayNamesMin:["রবি","সোম","মঙ্গল","বুধ","বৃহ","শুক্র","শনি"],weekHeader:"হপ্তা",dateFormat:"dd MM, yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.bn),$(".datepicker").datepicker({isRTL:!1,changeYear:!0,changeMonth:!0,dateFormat:"dd MM, yy",onSelect:function(e){$(this).val(n(e))}});var i=$.datepicker.formatDate("dd MM, yy",new Date);$(".datepicker").val(n(i)),["operation-name","operation-details","disease","anesthetist","surgeon","assistant"].forEach((e=>{const t=document.getElementById(e),n=document.getElementById(`${e}-output-text`);if(t&&n){const e="SELECT"===t.tagName?"change":"input";t.addEventListener(e,(()=>function(e,t){if(t){if("SELECT"===e.tagName&&e.multiple){const n=Array.from(e.selectedOptions).map(((e,t)=>`${t+1}. ${e.value}`)).join(", ");t.textContent=n}else t.textContent=e.value.trim();console.log(`Updating output: ${t.textContent}`)}}(t,n)))}}));let o=[];function a(e){e.select2({width:"100%",placeholder:"Select a medicine",allowClear:!0,minimumInputLength:2,ajax:{delay:250,data:function(e){return{search:e.term}},processResults:function(e,t){const n=t.term?t.term:"",i=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");return{results:o.filter((e=>{const t=e.Name?e.Name:"",n=e.DrugTypeShort?e.DrugTypeShort:"",o=e.Strength?e.Strength:"";return i.test(`${n} ${t} ${o}`)})).map((e=>({id:`${e.DrugTypeShort}. ${e.Name} - ${e.Strength||""}`,text:`${e.DrugTypeShort}. ${e.Name} - ${e.Strength||""}`})))}},cache:!0}});const t=e.data("existing-values");t&&t.length&&e.val(t).trigger("change")}Papa.parse("images/medicine.csv",{download:!0,header:!0,complete:function(e){o=e.data.filter((e=>e.Name&&e.DrugTypeShort)),a($(".medicine-select"))}}),$(".addnew_rx").click((function(){!function(e){const t=$(e);t.append('<li class="rxcard_list--item"><div class="select_option"><select class="select2 medicine-select" name="medicine"></select></div><ul class="select_option-wrap list-unstyled"><li><div class="state-filter"><select name=""><option value="">১ + ১ + ১</option><option value="">১ + ১ + ০</option><option value="">১ + ০ + ১</option><option value="">০ + ১ + ১</option><option value="">১ + ০ + ০</option><option value="">০ + ১ + ০</option><option value="">০ + ০ + ১</option></select></div></li><li><div class="state-filter"><select name=""><option value="">ভরা পেটে খাবেন</option><option value="">খালি পেতে খাবেন</option><option value="">খাবার আগে খাবেন</option><option value="">খাওয়ার পরে খাবেন</option><option value="">ক্ষত স্থানে লাগাবেন</option><option value="">কাটা স্থানে লাগাবেন</option><option value="">চুষে খাবেন</option></select></div></li><li><span contenteditable="true">৭ দিন</span></li></ul><button type="button" class="remove-item">✖</button></li>'),a(t.find("select.medicine-select").last()),t.find(".remove-item").last().click((function(){$(this).closest(".rxcard_list--item").remove()}))}($(this).data("target"))}))}));